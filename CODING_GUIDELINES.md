# コーディング規約

## 1. はじめに

このドキュメントは、本プロジェクトにおけるソースコードの品質、可読性、保守性を維持・向上させることを目的としたコーディング規約です。
プロジェクトに参加するすべての開発者は、この規約を遵守してください。

## 2. 全般的な規約

- **言語**: コード内のコメント、変数名、関数名などは、特別な理由がない限り **英語** を使用します。ただし、ユーザーに表示される文字列や、AIへのプロンプトなど、日本語であることが明確に求められる箇所は除きます。
- **フォーマット**: 各ファイルのインデントは **半角スペース4つ** に統一します。タブは使用しないでください。
- **文字コード**: ファイルの文字コードは **UTF-8 (BOMなし)** とします。
- **命名規則**:
    - 変数名、関数名は、その役割が明確にわかる具体的な名前を付けます。（例: `x` ではなく `user_name`）
    - 略語の使用は、一般的に広く認知されているもの（例: `http`, `id`）を除き、避けてください。
- **コメント**:
    - 複雑なロジックや、一読して意図が分かりにくい箇所には、なぜそのように実装したのかを説明するコメントを記述します。
    - コードを読めばわかるような自明なコメント（例: `// iを1増やす`）は不要です。
    - 不要になったコードはコメントアウトせず、バージョン管理システムを信頼して削除します。

## 3. Python (バックエンド / Flask)

### 3.1 スタイルガイド

- PEP 8 に準拠します。自動フォーマッタ（例: `black`, `autopep8`）の利用を強く推奨します。

### 3.2 命名規則

- **変数名・関数名**: スネークケース (`snake_case`) を使用します。（例: `get_user_data`）
- **定数**: すべて大文字のスネークケース (`UPPER_SNAKE_CASE`) を使用します。（例: `OPENROUTER_API_KEY`）
- **クラス名**: パスカルケース（アッパーキャメルケース） (`PascalCase`) を使用します。（例: `class UserProfile:`）

### 3.3 Flask 固有の規約

- **エンドポイント**:
    - URLは小文字のスネークケースで、単語間をハイフン `-` ではなくアンダースコア `_` で区切ります。（例: `/akinator_api`）
    - 複数の単語からなる場合は、 `_` でつなぎます。
- **エラーハンドリング**:
    - APIでエラーが発生した場合は、適切なHTTPステータスコード（例: 400, 500）と共に、エラーの原因を示すJSONオブジェクト (`{"error": "メッセージ"}`) を返却します。
    - `app.logger` を使用して、サーバー側でエラーの詳細をログに出力します。
- **環境変数**:
    - APIキーなどの機密情報は、直接コードに記述せず、`.env` ファイルに定義し `os.getenv()` を使して読み込みます。
    - `.env` ファイルは `.gitignore` に追加し、リポジトリに含めないようにします。

## 4. JavaScript (フロントエンド / Vue.js)

### 4.1 スタイルガイド

- 一般的なJavaScriptのベストプラクティスに従います。フォーマッタ（例: `Prettier`）の利用を推奨します。

### 4.2 命名規則

- **変数名・関数名**: キャメルケース (`camelCase`) を使用します。（例: `fetchNextQuestion`）
- **コンポーネント名**: パスカルケース (`PascalCase`) を使用します。（Vueコンポーネントをファイル分割する場合）

### 4.3 Vue.js 固有の規約

- **`data` オプション**:
    - `data` 内のプロパティは、その役割が明確にわかる名前を付けます。
    - 初期値は、そのプロパティの型に合わせたものを設定します。（例: 文字列なら `''`, 配列なら `[]`, オブジェクトなら `{}` or `null`）
- **`methods` オプション**:
    - 1つのメソッドは、1つの責任を持つように設計します。長大で複雑なメソッドは、適切な単位でヘルパーメソッドに分割します。
    - API通信を行うメソッドは `async/await` を使用し、`try...catch...finally` 構文でエラーハンドリングとローディング状態の管理を確実に行います。
- **HTMLテンプレート**:
    - `v-if` / `v-else-if` / `v-else` を使用して、コンポーネントの状態に応じた表示の切り替えを明確に行います。
    - `v-for` を使用する際は、必ず一意な `:key` を指定します。
    - インラインのスタイル指定 (`style="..."`) は最小限に留め、原則としてCSSクラスを使用します。

## 5. バージョン管理 (Git)

### 5.1 コミットメッセージ

- **フォーマット**: `[スコープ]: [変更内容の要約]` の形式を推奨します。
    - 例: `feat: ユーザーフィードバック機能を追加`
    - 例: `fix: 戻るボタンが表示されない不具合を修正`
    - 例: `docs: コーディング規約を追加`
- **スコープの種類**:
    - `feat`: 新機能の追加
    - `fix`: バグ修正
    - `refactor`: リファクタリング（機能的な変更なし）
    - `style`: コードスタイルの修正（フォーマットなど）
    - `docs`: ドキュメントの変更
    - `chore`: ビルドプロセスや補助ツールの変更など

### 5.2 ブランチ戦略

- `main` (または `master`) ブランチは、常に安定して動作する本番用のブランチとします。
- 機能追加やバグ修正は、`main` から切ったフィーチャーブランチ（例: `feature/add-login`, `fix/css-layout`）で行います。
- 作業が完了したら、プルリクエスト（またはマージリクエスト）を作成し、レビューを経て `main` ブランチにマージします。

---
*この規約はプロジェクトの進捗に応じて、チームで協議の上、改訂されることがあります。*